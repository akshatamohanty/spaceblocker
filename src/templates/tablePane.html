<div ng-controller="tableCtrl" ng-init='init()'>

    <!-- section for controls -->
    <section class='controls text-right'>
        <!-- <button type="button" ng-click="addRandomItem(row)" class="btn btn-sm btn-success"><i class="glyphicon glyphicon-plus"></i></button>
        <button type="button" id="btnExport" class="btn btn-sm btn-success"><i class="glyphicon glyphicon-download"></i></button> -->
        <button type="button" id="btnImport" ng-click="importFromCSV(row)" class="btn btn-sm btn-success" ><i class="glyphicon glyphicon-upload"></i></button>
        <input type="file" id="fileImport" name="excel[]" style="visibility: hidden; position: absolute" >  </input>
    </section>

    <section ng-if='groups.length==0' style='height: 100%; width: 100%; margin: 0 auto;'>
        <div class="text-center" style='padding-top: 50px'>No data</div>
    </section>

    <!-- section for table -->
    <section style='padding: 10px 10px;'>
        
        <uib-accordion close-others="true">

          <uib-accordion-group is-open="group.isOpen" ng-repeat="group in groups">
            
            <uib-accordion-heading>
              <i class="glyphicon-plus"></i> Year: {{ group.name }} [ {{ group.students }} students ] 
              <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': group.isOpen, 'glyphicon-chevron-right': !group.isOpen}"></i>
            </uib-accordion-heading>

            <uib-accordion close-others="true">

                <uib-accordion-group is-open="mod.isOpen" ng-repeat="module in group.modules">

                    <uib-accordion-heading><i class="glyphicon-plus"></i> {{ module.name }}  
                        <i class="pull-right glyphicon" ng-class="{'glyphicon-chevron-down': mod.isOpen, 'glyphicon-chevron-right': !mod.isOpen}"></i>
                    </uib-accordion-heading>

                    <div class='row' style='background-color: #ddd; font-weight: bold'>
                       <div class='col-sm-3'>Date</div> 
                       <div class='col-sm-3'>Time</div> 
                       <div class='col-sm-3'>Duration</div> 
                       <div class='col-sm-3'>Desks</div> 
                    </div>
                    <div ng-class='activeDate==rowCollection[row].formattedDate ? "row lecture-item highlighted" : "row lecture-item"' 
                        ng-repeat="row in module.rowIds" ng-click="alert(rowCollection[row].time)">
                       <div class='col-sm-3'>{{rowCollection[row].date}}</div>
                       <div class='col-sm-3'>{{rowCollection[row].time}}</div> 
                       <div class='col-sm-3'>{{rowCollection[row].duration/60}} hour(s)</div> 
                       <div class='col-sm-3'>{{rowCollection[row].desks}}</div> 
                    </div>

                </uib-accordion-group>

            </uib-accordion>

            
          </uib-accordion-group>

        </uib-accordion>

    </section>

</div>